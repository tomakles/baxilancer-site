<!DOCTYPE html>
<html lang="de-DE">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="preconnect" href="https://www.gstatic.com" crossorigin />
  <script src="/assets/lang.js" defer></script>
  <link rel="stylesheet" href="/assets/footer.css" />
  <script src="/assets/footer.js" defer></script>

  <title>Zeiterfassungs‚ÄëApp f√ºr Freelancer mit GPS & Belegscanner | BAXILANCER</title>

  <meta name="description" content="BAXILANCER ist eine App zur automatischen Zeiterfassung f√ºr Freelancer und Handwerk. GPS‚Äëbasierte Zeiterfassung vor Ort, KI‚ÄëBelegscan und √ºbersichtliche Berichte f√ºr Abrechnung und Steuern." />
  <meta name="robots" content="index,follow,max-image-preview:large,max-snippet:-1,max-video-preview:-1" />

  <!-- Canonical URL -->
  <link rel="canonical" href="https://www.baxilancer.ovh/de/" />

  <!-- hreflang ‚Äì all languages -->
  <link rel="alternate" href="https://www.baxilancer.ovh/" hreflang="en" />
  <link rel="alternate" href="https://www.baxilancer.ovh/" hreflang="en-US" />
  <link rel="alternate" href="https://www.baxilancer.ovh/sk/" hreflang="sk" />
  <link rel="alternate" href="https://www.baxilancer.ovh/de/" hreflang="de" />
  <link rel="alternate" href="https://www.baxilancer.ovh/es/" hreflang="es" />
  <link rel="alternate" href="https://www.baxilancer.ovh/pl/" hreflang="pl" />
  <link rel="alternate" href="https://www.baxilancer.ovh/" hreflang="x-default" />

  <!-- Favicon & app icons -->
  <link rel="icon" href="/favicon.ico" sizes="any" />
  <link rel="shortcut icon" href="/favicon.ico" />
  <link rel="icon" type="image/png" href="/favicon.png" />
  <link rel="icon" type="image/png" sizes="48x48" href="/favicon-48x48.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="icon" type="image/png" sizes="192x192" href="/favicon-192x192.png" />
  <link rel="icon" type="image/png" sizes="256x256" href="/favicon-256x256.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <meta name="msapplication-TileImage" content="/favicon-192x192.png" />
  <meta name="msapplication-TileColor" content="#3D642D" />
  <meta name="theme-color" content="#3D642D" />

  <!-- Open Graph -->
  <meta property="og:title" content="Zeiterfassungs‚ÄëApp f√ºr Freelancer mit GPS & Belegscanner | BAXILANCER" />
  <meta property="og:description" content="Automatische Zeiterfassung f√ºr Freelancer und Handwerk. GPS‚ÄëZeiterfassung, KI‚ÄëBelegscan und Projektberichte f√ºr Abrechnung und Steuern." />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="BAXILANCER" />
  <meta property="og:url" content="https://www.baxilancer.ovh/de/" />
  <meta property="og:image" content="https://www.baxilancer.ovh/logo.png" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Zeiterfassungs‚ÄëApp f√ºr Freelancer mit GPS & Belegscanner | BAXILANCER" />
  <meta name="twitter:description" content="Automatische Zeiterfassung f√ºr Freelancer und Handwerk. GPS‚ÄëZeiterfassung, KI‚ÄëBelegscan und Projektberichte f√ºr Abrechnung und Steuern." />
  <meta name="twitter:image" content="https://www.baxilancer.ovh/logo.png" />

  <!-- Structured data: app -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "BAXILANCER",
    "applicationCategory": "BusinessApplication",
    "operatingSystem": "iOS",
    "description": "App zur automatischen Zeiterfassung f√ºr Freelancer mit GPS‚ÄëZeiterfassung, KI‚ÄëBelegscan und Projektberichten.",
    "url": "https://www.baxilancer.ovh/de/",
    "availableLanguage": ["en", "sk", "de", "es", "pl"],
    "offers": {
      "@type": "Offer",
      "priceCurrency": "EUR",
      "description": "7 Tage kostenlos testen, danach monatliches Abo (Preise zum Start im App Store)."
    },
    "publisher": {
      "@type": "Organization",
      "name": "BAXILANCER",
      "url": "https://www.baxilancer.ovh/"
    }
  }
  </script>

  <!-- Structured data: organization with logo -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "BAXILANCER",
    "url": "https://www.baxilancer.ovh/",
    "logo": "https://www.baxilancer.ovh/logo.png",
    "email": "baxilancer@gmail.com",
    "sameAs": ["https://instagram.com/baxilancer.app"]
  }
  </script>

  <!-- Structured data: FAQ (DE) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "Wie funktioniert die automatische GPS‚ÄëZeiterfassung in BAXILANCER?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Du erstellst ein Projekt und hinterlegst die Adresse. Sobald du vor Ort bist, startet BAXILANCER die Zeiterfassung automatisch anhand deines GPS‚ÄëStandorts. Wenn du gehst, stoppt der Timer und die Stunden werden in deiner Historie gespeichert."
        }
      },
      {
        "@type": "Question",
        "name": "Ist BAXILANCER f√ºr Handwerk und Au√üendienst geeignet?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Ja. BAXILANCER ist vor allem f√ºr Handwerker, Monteure, Techniker und alle gedacht, die beim Kunden vor Ort arbeiten. Es hilft, Stunden automatisch zu erfassen und Ausgaben sowie Belege mit Projekten zu verkn√ºpfen."
        }
      },
      {
        "@type": "Question",
        "name": "Kann ich Belege und Ausgaben in BAXILANCER erfassen?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Mit BAXILANCER kannst du Belege per KI scannen, Projekten zuordnen und √ºbersichtliche Berichte f√ºr Abrechnung und Steuern erstellen ‚Äì Zeiterfassung und Ausgabenverwaltung in einem Tool."
        }
      }
    ]
  }
  </script>

  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-analytics.js";
    import { initializeAppCheck, ReCaptchaV3Provider } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app-check.js";
    import { getFirestore, doc, setDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBKsllWUmAfBPidpWP_t2IB9OSpM3I9eqY",
      authDomain: "baxilancer-edb05.firebaseapp.com",
      projectId: "baxilancer-edb05",
      storageBucket: "baxilancer-edb05.firebasestorage.app",
      messagingSenderId: "815130828710",
      appId: "1:815130828710:web:96ec7949266c5b5af1b967",
      measurementId: "G-91YQFQX744"
    };

    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);

    const APP_CHECK_SITE_KEY = "";
    if (APP_CHECK_SITE_KEY) {
      try {
        initializeAppCheck(app, {
          provider: new ReCaptchaV3Provider(APP_CHECK_SITE_KEY),
          isTokenAutoRefreshEnabled: true
        });
      } catch (err) {
        console.warn("Firebase App Check init failed:", err);
      }
    }

    const db = getFirestore(app);

    window.firebaseDB = db;
    window.firebaseDoc = doc;
    window.firebaseSetDoc = setDoc;
    window.firebaseServerTimestamp = serverTimestamp;
  </script>

  <style>
    :root {
      --primary-green: #3D642D;
      --primary-green-dark: #304F23;
      --accent-yellow: #F6B600;
      --bg-grey: #F2F3F3;
      --border-grey: #D7D7D7;
      --text-main: #111827;
      --text-muted: #4B5563;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: var(--text-main);
      background: var(--bg-grey);
    }

    header {
      background: #ffffff;
      padding: 24px 20px 48px;
      border-bottom: 1px solid var(--border-grey);
    }

    .header-inner {
      max-width: 960px;
      margin: 0 auto;
      position: relative;
      text-align: center;
    }

    .header-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      margin-bottom: 16px;
    }

    .brand {
      display: inline-flex;
      align-items: center;
      gap: 24px;
    }

    .logo-icon {
      width: 72px;
      height: 72px;
      border-radius: 12px;
      background: var(--bg-grey);
      object-fit: contain;
    }

    .logo-text {
      font-weight: 800;
      font-size: 36px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--primary-green);
    }

    .logo-text span {
      color: var(--accent-yellow);
    }

    .lang-switcher {
      margin-left: auto;
      display: flex;
      gap: 6px;
      align-items: center;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .lang-link {
      padding: 6px 10px;
      border-radius: 6px;
      border: 1px solid var(--border-grey);
      font-size: 12px;
      background: #ffffff;
      color: var(--text-main);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 4px;
      font-weight: 500;
      white-space: nowrap;
      transition: all 0.2s ease;
    }

    .lang-link:hover {
      border-color: var(--primary-green);
      color: var(--primary-green);
    }

    .lang-link.active {
      background: var(--primary-green);
      color: #ffffff;
      border-color: var(--primary-green);
    }

    .pill {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 999px;
      background: #ffffff;
      border: 1px solid var(--primary-green);
      color: var(--primary-green);
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      margin-bottom: 8px;
    }

    h1 {
      font-size: 26px;
      margin: 10px 0 10px;
      color: var(--primary-green);
    }

    .subtitle {
      font-size: 17px;
      color: var(--text-muted);
      max-width: 600px;
      margin: 0 auto;
    }

    .btn-primary {
      display: inline-block;
      margin-top: 24px;
      padding: 12px 26px;
      border-radius: 999px;
      background: var(--primary-green);
      color: #ffffff;
      text-decoration: none;
      font-weight: 600;
      font-size: 16px;
      border: none;
      box-shadow: 0 8px 16px rgba(61, 100, 45, 0.25);
      cursor: pointer;
    }

    .btn-primary:hover {
      background: var(--primary-green-dark);
    }

    main {
      max-width: 960px;
      margin: 0 auto;
      padding: 40px 16px 60px;
    }

    h2 {
      font-size: 26px;
      margin-bottom: 16px;
      color: var(--primary-green);
    }

    .section {
      margin-bottom: 40px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 20px;
    }

    .card {
      background: #ffffff;
      border-radius: 16px;
      padding: 0 20px 22px;
      box-shadow: 0 10px 25px rgba(15, 23, 42, 0.05);
      border: 1px solid var(--border-grey);
    }

    .card h3 {
      margin: 0 -20px 14px;
      padding: 10px 20px;
      font-size: 16px;
      font-weight: 700;
      background: var(--accent-yellow);
      color: var(--text-main);
      border-radius: 16px 16px 0 0;
      border-bottom: 1px solid var(--border-grey);
    }

    .card p {
      margin: 0;
      color: var(--text-muted);
      font-size: 15px;
      line-height: 1.5;
    }

    .pricing-box {
      background: #ffffff;
      border-radius: 14px;
      padding: 20px;
      border: 1px solid var(--border-grey);
    }

    .pricing-box p {
      margin: 4px 0;
      color: var(--text-main);
    }

    .waitlist-form {
      max-width: 520px;
      width: 100%;
      margin-top: 12px;
    }

    .waitlist-row {
      display: flex;
      gap: 10px;
      align-items: center;
      margin-top: 12px;
    }

    .waitlist-input {
      flex: 1;
      height: 48px;
      padding: 0 26px;
      border-radius: 999px;
      border: 1px solid var(--border-grey);
      font-size: 16px;
      line-height: 48px;
      outline: none;
      background-color: #ffffff;
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      transition: border-color 0.18s ease, box-shadow 0.18s ease, transform 0.06s ease;
    }

    .waitlist-input::placeholder {
      color: #9ca3af;
    }

    .waitlist-input:focus {
      border-color: var(--primary-green);
      box-shadow: 0 0 0 3px rgba(61, 100, 45, 0.18);
      transform: translateY(-1px);
    }

    .waitlist-btn {
      height: 48px;
      padding: 0 26px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      white-space: nowrap;
      margin-top: 0;
    }

    .waitlist-note {
      margin-top: 8px;
      font-size: 13px;
      color: #6b7280;
    }

    @media (max-width: 640px) {
      .waitlist-row {
        flex-direction: column;
        align-items: stretch;
      }

      .waitlist-input {
        width: 100%;
        height: 60px;
        font-size: 16px;
        line-height: 60px;
      }

      .waitlist-btn {
        width: 100%;
        height: 60px;
        text-align: center;
      }
    }

    .muted {
      color: #6b7280;
      font-size: 14px;
    }

    .success-message {
      display: none;
      margin-top: 12px;
      padding: 12px 16px;
      border-radius: 8px;
      background: #d1fae5;
      color: #065f46;
      font-size: 14px;
      text-align: center;
      animation: slideIn 0.3s ease-out;
    }

    .error-message {
      display: none;
      margin-top: 12px;
      padding: 12px 16px;
      border-radius: 8px;
      background: #fee2e2;
      color: #991b1b;
      font-size: 14px;
      text-align: center;
      animation: slideIn 0.3s ease-out;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-8px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    footer {
      text-align: center;
      padding: 24px 16px 32px;
      font-size: 14px;
      color: #6b7280;
      border-top: 1px solid var(--border-grey);
      background: #ffffff;
    }

    

    

    .faq-list {
      background: #ffffff;
      border-radius: 16px;
      padding: 20px;
      border: 1px solid var(--border-grey);
    }

    .faq-item + .faq-item {
      margin-top: 16px;
      padding-top: 12px;
      border-top: 1px dashed var(--border-grey);
    }

    .faq-item h3 {
      margin: 0 0 6px;
      font-size: 16px;
      color: var(--primary-green-dark);
    }

    .faq-item p {
      margin: 0;
      font-size: 14px;
      color: var(--text-muted);
      line-height: 1.5;
    }
  </style>
</head>
<body>

<header>
  <div class="header-inner">
    <div class="header-top">
      <div class="brand">
        <img src="/favicon-192x192.png" alt="BAXILANCER logo" class="logo-icon" width="72" height="72">
        <div class="logo-text"><span>BAXI</span>LANCER</div>
      </div>

      <div class="lang-switcher">
        <a href="/" class="lang-link">üá¨üáß EN</a>
        <a href="/de/" class="lang-link active">üá©üá™ DE</a>
        <a href="/es/" class="lang-link">üá™üá∏ ES</a>
        <a href="/pl/" class="lang-link">üáµüá± PL</a>
        <a href="/sk/" class="lang-link">üá∏üá∞ SK</a>
      </div>
    </div>

    <div class="hero-copy" style="text-align:center; margin-top:8px;">
      <div class="pill">F√ºr Freelancer & Solo‚ÄëSelbstst√§ndige</div>
      <h1>Zeiterfassungs‚ÄëApp mit GPS & Belegscanner</h1>
      <p class="subtitle">
        BAXILANCER ist eine App zur automatischen Zeiterfassung f√ºr Freelancer und Solo‚ÄëSelbstst√§ndige.
        Sie nutzt deinen Standort (GPS), um Arbeitszeiten zu erfassen, und erg√§nzt das
        Ganze um KI‚ÄëBelegscan sowie projektbasierte Ausgabenberichte f√ºr Abrechnung und Steuern.
      </p>
      <a href="#watchlist-form" class="btn-primary">Bald im App Store</a>
    </div>
  </div>
</header>

<main>
  <section class="section">
    <h2>Was BAXILANCER f√ºr dich macht</h2>
    <div class="grid">
      <div class="card">
        <h3>üìç Automatische Zeiterfassung</h3>
        <p>
          Lege ein Projekt an, hinterlege eine Adresse und markiere es als aktiv. Sobald du vor Ort bist,
          l√§uft der Timer. Wenn du gehst, stoppt er und speichert die Zeit in deiner Historie.
        </p>
      </div>
      <div class="card">
        <h3>üßæ Beleg‚Äë & Rechnungsscanner</h3>
        <p>
          Fotografiere einen Beleg oder eine Rechnung ‚Äì die KI liest die einzelnen Positionen aus. Weise alles einem Projekt zu ‚Äì
          gesammelt oder Position f√ºr Position.
        </p>
      </div>
      <div class="card">
        <h3>üìä Berichte f√ºr die Abrechnung</h3>
        <p>
          Sieh die Zeiten pro Projekt, verkn√ºpfte Ausgaben und erstelle klare Zusammenfassungen f√ºr
          Rechnungen und Buchhaltung.
        </p>
      </div>
    </div>
  </section>

  <section class="section">
    <h2>F√ºr wen ist BAXILANCER?</h2>
    <div class="grid">
      <div class="card">
        <h3>üîß Handwerk & Au√üendienst</h3>
        <p>
          Bau, Elektrik, Sanit√§r, Montage, Service ‚Äì √ºberall dort, wo du beim Kunden vor Ort arbeitest
          und Stunden sowie Kosten zuverl√§ssig erfassen musst.
        </p>
      </div>
      <div class="card">
        <h3>üíª Freelancer nach Stunden</h3>
        <p>
          Entwickler, IT‚ÄëBerater, Designer, Fotografen, Marketer ‚Äì √ºberall dort, wo Stunden pro Projekt
          korrekt auf Rechnungen landen sollen.
        </p>
      </div>
      <div class="card">
        <h3>üë• Kleine Teams (bald)</h3>
        <p>
          Zuk√ºnftige Versionen erm√∂glichen Zeiterfassung f√ºr mehrere Personen in gemeinsamen Projekten,
          mit kombinierten Berichten und exportierbaren Daten.
        </p>
      </div>
    </div>
  </section>

  <!-- Email Watchlist Section -->
  <section class="section">
    <h2>Benachrichtigung zum Start</h2>
    <p class="waitlist-desc">
      Hinterlasse deine E‚ÄëMail‚ÄëAdresse und wir informieren dich, sobald BAXILANCER im App Store verf√ºgbar ist.
    </p>
    <form id="watchlist-form" class="waitlist-form">
      <div class="waitlist-row">
        <input
          type="email"
          id="watchlist-email"
          class="waitlist-input"
          required
          autocomplete="email"
          placeholder="Deine E‚ÄëMail‚ÄëAdresse"
        />
        <button type="submit" class="btn-primary waitlist-btn" id="watchlist-btn">
          Auf die Warteliste
        </button>
      </div>
      <p class="waitlist-note">
        Wir nutzen deine E‚ÄëMail nur, um dich √ºber BAXILANCER zu informieren. Kein Spam.
      </p>
      <div class="success-message" id="watchlist-success">
        ‚úì Danke! Wir melden uns zum Start.
      </div>
      <div class="error-message" id="watchlist-error">
        ‚úó Bitte gib eine g√ºltige E‚ÄëMail‚ÄëAdresse ein.
      </div>
    </form>
  </section>

  <section class="section">
    <h2>Preise & Sprachen</h2>
    <div class="pricing-box">
      <p>Plattform: iOS (iPhone)</p>
      <p>Modell: 7 Tage kostenlos testen, danach monatliches Abo.</p>
      <p>App‚ÄëSprachen zum Start: Englisch, Slowakisch, Deutsch, Spanisch, Polnisch.</p>
      <p class="muted">
        Genaue Preise und Pakete werden zum Start im App Store bekannt gegeben.
      </p>
    </div>
  </section>

  <!-- SEO text section -->
  <section class="section" id="seo-copy">
    <h2>Zeiterfassungs‚ÄëApp mit GPS und KI‚ÄëBelegscan</h2>
    <p>
      BAXILANCER ist eine Zeiterfassungs‚ÄëApp speziell f√ºr Freelancer und Solo‚ÄëSelbstst√§ndige.
      Statt manuell Timer zu starten und zu stoppen, nutzt die App deinen Standort (GPS), um
      Arbeitszeiten pro Projekt automatisch zu erfassen. Das macht sie besonders hilfreich f√ºr Handwerk,
      Au√üendienst und alle, die nach Stunden arbeiten.
    </p>
    <p>
      Neben der Zeiterfassung unterst√ºtzt BAXILANCER auch Ausgaben‚Äë und Belegverwaltung.
      Du kannst Belege per KI scannen, Projekten zuordnen und √ºbersichtliche Berichte f√ºr Abrechnung
      und Steuern erstellen. Ziel ist es, Zeiterfassung, Belegscan und Berichte in einem einfachen Tool zu b√ºndeln.
    </p>
    <p>
      Wenn du nach einer automatischen Zeiterfassung f√ºr Freelancer, einer GPS‚Äëbasierten Zeiterfassungs‚ÄëApp
      oder einem KI‚ÄëBelegscanner suchst, soll BAXILANCER all das an einem Ort abdecken.
    </p>
  </section>

  <!-- FAQ section matching FAQ schema -->
  <section class="section">
    <h2>FAQ: Automatische Zeiterfassung mit BAXILANCER</h2>
    <div class="faq-list">
      <div class="faq-item">
        <h3>Wie funktioniert die automatische GPS‚ÄëZeiterfassung in BAXILANCER?</h3>
        <p>
          Du erstellst ein Projekt und hinterlegst die Adresse. Sobald du vor Ort bist, startet BAXILANCER
          die Zeiterfassung automatisch anhand deines GPS‚ÄëStandorts. Wenn du gehst, stoppt der Timer und
          die Stunden werden in deiner Historie gespeichert.
        </p>
      </div>
      <div class="faq-item">
        <h3>Ist BAXILANCER f√ºr Handwerk und Au√üendienst geeignet?</h3>
        <p>
          Ja. BAXILANCER ist vor allem f√ºr Handwerker, Monteure, Techniker und alle gedacht, die beim Kunden
          vor Ort arbeiten. Es hilft, Stunden automatisch zu erfassen und Ausgaben sowie Belege mit Projekten zu verkn√ºpfen.
        </p>
      </div>
      <div class="faq-item">
        <h3>Kann ich Belege und Ausgaben in BAXILANCER erfassen?</h3>
        <p>
          Mit BAXILANCER kannst du Belege per KI scannen, Projekten zuordnen und √ºbersichtliche Berichte f√ºr Abrechnung und Steuern erstellen ‚Äì
          Zeiterfassung und Ausgabenverwaltung in einem Tool.
        </p>
      </div>
    </div>
  </section>
</main>

<footer>
  ¬© 2025 BAXILANCER ‚Ä¢ baxilancer.ovh ‚Ä¢ Kontakt: baxilancer@gmail.com
</footer>

<script>
  const watchlistForm = document.getElementById('watchlist-form');
  const watchlistEmail = document.getElementById('watchlist-email');
  const successMsg = document.getElementById('watchlist-success');
  const errorMsg = document.getElementById('watchlist-error');

  const ATTR_KEY = 'baxilancer_attr';
  const ATTR_TTL_MS = 1000 * 60 * 60 * 24 * 30; // 30 days

  function safeLocalStorageGet(key) {
    try {
      return localStorage.getItem(key);
    } catch {
      return null;
    }
  }

  function safeLocalStorageSet(key, value) {
    try {
      localStorage.setItem(key, value);
    } catch {
      // Ignore storage errors (e.g., Safari private mode)
    }
  }

  function getReferrerHost() {
    try {
      return document.referrer ? new URL(document.referrer).hostname : null;
    } catch {
      return null;
    }
  }

  function getAttributionFromUrl() {
    const url = new URL(window.location.href);
    const params = url.searchParams;

    const src = params.get('src');
    const utm = {
      source: params.get('utm_source'),
      medium: params.get('utm_medium'),
      campaign: params.get('utm_campaign'),
      term: params.get('utm_term'),
      content: params.get('utm_content')
    };

    const hasUtm = Object.values(utm).some((v) => typeof v === 'string' && v.length > 0);
    const hasSrc = typeof src === 'string' && src.length > 0;
    if (!hasSrc && !hasUtm) return null;

    return {
      src: hasSrc ? src : null,
      utm,
      savedAt: Date.now()
    };
  }

  function getStoredAttribution() {
    const raw = safeLocalStorageGet(ATTR_KEY);
    if (!raw) return null;
    try {
      const parsed = JSON.parse(raw);
      if (!parsed || typeof parsed !== 'object') return null;
      if (!parsed.savedAt || typeof parsed.savedAt !== 'number') return null;
      if (Date.now() - parsed.savedAt > ATTR_TTL_MS) return null;
      return parsed;
    } catch {
      return null;
    }
  }

  function getSignupContext(lang) {
    const urlAttr = getAttributionFromUrl();
    if (urlAttr) safeLocalStorageSet(ATTR_KEY, JSON.stringify(urlAttr));
    const attr = urlAttr || getStoredAttribution();

    return {
      lang,
      page: window.location.pathname,
      src: attr?.src || null,
      utm: attr?.utm || null,
      referrer: getReferrerHost(),
      userLang: navigator.language || null
    };
  }

  function isValidEmail(email) {
    const emailRegex = /^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$/;
    return emailRegex.test(email);
  }

  watchlistForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const email = watchlistEmail.value.trim().toLowerCase();

    successMsg.style.display = 'none';
    errorMsg.style.display = 'none';

    if (!isValidEmail(email)) {
      errorMsg.textContent = '‚úó Bitte gib eine g√ºltige E‚ÄëMail‚ÄëAdresse ein.';
      errorMsg.style.display = 'block';
      return;
    }

    let storedEmails = [];
    try {
      storedEmails = JSON.parse(safeLocalStorageGet('watchlist') || '[]');
      if (!Array.isArray(storedEmails)) storedEmails = [];
    } catch {
      storedEmails = [];
    }

    storedEmails = storedEmails
      .filter((item) => typeof item === 'string')
      .map((item) => item.trim().toLowerCase())
      .filter(Boolean);

    if (storedEmails.includes(email)) {
      successMsg.textContent = '‚úì Du bist schon auf der Warteliste.';
      successMsg.style.display = 'block';
      watchlistEmail.value = '';
      return;
    }

    const context = getSignupContext('de');

    try {
      if (window.firebaseDB) {
        await window.firebaseSetDoc(window.firebaseDoc(window.firebaseDB, 'watchlist', email), {
          email: email,
          timestamp: window.firebaseServerTimestamp(),
          source: 'web-de',
          context
        });
      }
    } catch (firebaseError) {
      console.log('Firebase error, storing locally as fallback:', firebaseError.message);
    }

    if (!storedEmails.includes(email)) {
      storedEmails.push(email);
      safeLocalStorageSet('watchlist', JSON.stringify(storedEmails));
    }

    successMsg.textContent = '‚úì Danke! Wir melden uns zum Start.';
    successMsg.style.display = 'block';
    watchlistEmail.value = '';

    if (window.gtag) {
      window.gtag('event', 'watchlist_signup', {
        event_category: 'engagement',
        event_label: 'de',
        src: context.src || undefined
      });
    }
  });

  // Basic scroll depth analytics
  let maxScrollSent = 0;
  const scrollMarks = [25, 50, 75, 90];

  window.addEventListener('scroll', () => {
    const doc = document.documentElement;
    const body = document.body;
    const scrollTop = doc.scrollTop || body.scrollTop;
    const scrollHeight = (doc.scrollHeight || body.scrollHeight) - window.innerHeight;
    if (scrollHeight <= 0) return;

    const percent = Math.round((scrollTop / scrollHeight) * 100);
    for (const mark of scrollMarks) {
      if (percent >= mark && maxScrollSent < mark) {
        maxScrollSent = mark;
        if (window.gtag) {
          window.gtag('event', 'scroll_depth', {
            event_category: 'engagement',
            event_label: mark + '%',
            value: mark
          });
        }
      }
    }
  });
</script>

</body>
</html>
